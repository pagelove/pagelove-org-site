<section id="how-it-works" class="pt-12 md:pt-24 pb-0 md:pb-8 bg-gradient-subtle">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">How It Works</h2>
        </div>

        <!-- Diagram -->
        <div class="max-w-5xl mx-auto mb-16">
            <div class="card p-8 shadow-soft hover-lift">
                <div class="flex flex-col md:flex-row items-center justify-between gap-8">
                    <!-- Step 1: Browser -->
                    <div class="flex-1 text-center">
                        <div class="w-16 h-16 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center">
                            <svg class="h-8 w-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold mb-2">Browser</h3>
                        <div class="html-tag text-xs">
                            PUT /page.html<br>
                            Range: selector=#todo-1
                        </div>
                    </div>

                    <!-- Arrow 1 - responsive direction -->
                    <div class="flex justify-center">
                        <svg class="h-8 w-8 text-muted-foreground hidden md:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        <svg class="h-8 w-8 text-muted-foreground block md:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                    </div>

                    <!-- Step 2: Server -->
                    <div class="flex-1 text-center">
                        <div class="w-16 h-16 mx-auto mb-4 bg-accent/10 rounded-full flex items-center justify-center">
                            <svg class="h-8 w-8 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold mb-2">Server</h3>
                        <p class="text-sm text-muted-foreground">
                            Updates that element instantly
                        </p>
                    </div>

                    <!-- Arrow 2 - responsive direction -->
                    <div class="flex justify-center">
                        <svg class="h-8 w-8 text-muted-foreground hidden md:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        <svg class="h-8 w-8 text-muted-foreground block md:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                        </svg>
                    </div>

                    <!-- Step 3: WebSocket -->
                    <div class="flex-1 text-center">
                        <div class="w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center">
                            <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold mb-2">WebSocket</h3>
                        <p class="text-sm text-muted-foreground">
                            Broadcasts to all users
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Before/After Comparison -->
        <div class="max-w-4xl mx-auto mb-16">
            <div class="card overflow-hidden shadow-soft">
                <div class="grid grid-cols-1 md:grid-cols-2">
                    <!-- Before PageLove -->
                    <div class="p-8 bg-red-50/30 border-r border-border">
                        <h3 class="text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2">
                            <span class="text-red-500">✕</span>
                            Before PageLove
                        </h3>
                        <ul class="space-y-3">
                            {% for item in comparison.before %}
                            <li class="flex items-start gap-3">
                                <span class="text-red-500 mt-1">•</span>
                                <span class="font-mono text-sm">{{ item }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>

                    <!-- After PageLove -->
                    <div class="p-8 bg-green-50/30">
                        <h3 class="text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2">
                            <span class="text-green-500">✓</span>
                            After PageLove
                        </h3>
                        <ul class="space-y-3">
                            {% for item in comparison.after %}
                            <li class="flex items-start gap-3">
                                <span class="text-green-500 mt-1">•</span>
                                <span class="font-mono text-sm font-medium">{{ item }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Why this matters -->
        <div class="max-w-4xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {% for benefit in benefits %}
                <div class="card p-6 text-center hover-lift">
                    <div class="html-tag-accent mb-4 justify-center">
                        {{ benefit.tag }}
                    </div>
                    <h4 class="font-semibold mb-3">{{ benefit.title }}</h4>
                    <p class="text-muted-foreground">
                        {{ benefit.description }}
                    </p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>